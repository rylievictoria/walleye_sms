{"ast":null,"code":"import _slicedToArray from\"/Users/rhendren/walleye_sms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Section from\"./Section\";import SectionHeader from\"./SectionHeader\";import ReauthModal from\"./ReauthModal\";import DashboardNav from\"./DashboardNav\";import FormAlert from\"./FormAlert\";import DashboardHome from\"./DashboardHome\";import DashboardSms from\"./DashboardSms\";import DashboardDeliveries from\"./DashboardDeliveries\";import{Link,useRouter}from\"./../util/router.js\";import{useAuth}from\"./../util/auth.js\";import\"./DashboardSection.scss\";function DashboardSection(props){var auth=useAuth();var router=useRouter();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),formAlert=_useState2[0],setFormAlert=_useState2[1];// State to control whether we show a re-authentication flow\n// Required by some security sensitive actions, such as changing password.\nvar _useState3=useState({show:false}),_useState4=_slicedToArray(_useState3,2),reauthState=_useState4[0],setReauthState=_useState4[1];var validSections={\"home\":true,\"send-a-text\":true,\"deliveries\":true};var section=validSections[props.section]?props.section:\"home\";// Handle status of type \"success\", \"error\", or \"requires-recent-login\"\n// We don't treat \"requires-recent-login\" as an error as we handle it\n// gracefully by taking the user through a re-authentication flow.\nvar handleStatus=function handleStatus(_ref){var type=_ref.type,message=_ref.message,callback=_ref.callback;if(type===\"requires-recent-login\"){// First clear any existing message\nsetFormAlert(null);// Then update state to show re-authentication modal\nsetReauthState({show:true,// Failed action to try again after reauth\ncallback:callback});}else{// Display message to user (type is success or error)\nsetFormAlert({type:type,message:message});}};return/*#__PURE__*/React.createElement(Section,{color:props.color,size:props.size},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(SectionHeader,{title:props.title,subtitle:props.subtitle,size:3,spaced:true,className:\"has-text-centered\"}),router.query.paid&&auth.user.planIsActive&&/*#__PURE__*/React.createElement(\"article\",{className:\"DashboardSection__paid-message message is-success mx-auto\"},/*#__PURE__*/React.createElement(\"div\",{className:\"message-body\"},\"You are now subscribed\",/*#__PURE__*/React.createElement(\"span\",{className:\"ml-2\",role:\"img\",\"aria-label\":\"party\"},\"\\uD83E\\uDD73\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"columns is-vcentered is-desktop mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"column is-6-desktop\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(Section,{color:props.color,size:props.size,backgroundImage:props.backgroundImage,backgroundImageOpacity:props.backgroundImageOpacity},reauthState.show&&/*#__PURE__*/React.createElement(ReauthModal,{callback:reauthState.callback,provider:auth.user.providers[0],onDone:function onDone(){return setReauthState({show:false});}}),/*#__PURE__*/React.createElement(DashboardNav,{activeKey:section,parentColor:props.color}),/*#__PURE__*/React.createElement(\"div\",{className:\"DashboardSection__container container\"},formAlert&&/*#__PURE__*/React.createElement(FormAlert,{type:formAlert.type,message:formAlert.message,style:{maxWidth:\"450px\"}}),section===\"home\"&&/*#__PURE__*/React.createElement(DashboardHome,{parentColor:props.color,onStatus:handleStatus}),section===\"send-a-text\"&&/*#__PURE__*/React.createElement(DashboardSms,{parentColor:props.color,onStatus:handleStatus}),section===\"deliveries\"&&/*#__PURE__*/React.createElement(DashboardDeliveries,{parentColor:props.color,onStatus:handleStatus}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"column is-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"column\"},/*#__PURE__*/React.createElement(\"figure\",{className:\"DashboardSection__image image\"},/*#__PURE__*/React.createElement(\"img\",{src:\"https://uploads.divjoy.com/undraw-personal_settings_kihd.svg\",alt:\"Illustration\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"mx-auto has-text-centered mt-5\",style:{maxWidth:\"460px\"}},/*#__PURE__*/React.createElement(\"nav\",{className:\"panel mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"panel-block is-block\"},\"Logged in as\\xA0\",/*#__PURE__*/React.createElement(\"strong\",null,auth.user.email)),/*#__PURE__*/React.createElement(\"div\",{className:\"panel-block is-block\"},auth.user.stripeSubscriptionId&&/*#__PURE__*/React.createElement(React.Fragment,null,\"Subscription data\",/*#__PURE__*/React.createElement(\"br\",null),\"ID: \",/*#__PURE__*/React.createElement(\"strong\",null,auth.user.stripeSubscriptionId),/*#__PURE__*/React.createElement(\"br\",null),\"Price ID: \",/*#__PURE__*/React.createElement(\"strong\",null,auth.user.stripePriceId),/*#__PURE__*/React.createElement(\"br\",null),\"Status: \",/*#__PURE__*/React.createElement(\"strong\",null,auth.user.stripeSubscriptionStatus)),!auth.user.stripeSubscriptionId&&/*#__PURE__*/React.createElement(Link,{to:\"/pricing\"},\"Subscribe to a plan\")),/*#__PURE__*/React.createElement(\"div\",{className:\"panel-block is-block\"},/*#__PURE__*/React.createElement(Link,{to:\"/settings/general\"},\"Account settings\"))))));}export default DashboardSection;","map":{"version":3,"sources":["/Users/rhendren/walleye_sms/src/components/DashboardSection.js"],"names":["React","useState","Section","SectionHeader","ReauthModal","DashboardNav","FormAlert","DashboardHome","DashboardSms","DashboardDeliveries","Link","useRouter","useAuth","DashboardSection","props","auth","router","formAlert","setFormAlert","show","reauthState","setReauthState","validSections","section","handleStatus","type","message","callback","color","size","title","subtitle","query","paid","user","planIsActive","backgroundImage","backgroundImageOpacity","providers","maxWidth","email","stripeSubscriptionId","stripePriceId","stripeSubscriptionStatus"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Section from \"./Section\";\nimport SectionHeader from \"./SectionHeader\";\nimport ReauthModal from \"./ReauthModal\";\nimport DashboardNav from \"./DashboardNav\";\nimport FormAlert from \"./FormAlert\";\nimport DashboardHome from \"./DashboardHome\";\nimport DashboardSms from \"./DashboardSms\";\nimport DashboardDeliveries from \"./DashboardDeliveries\";\nimport { Link, useRouter } from \"./../util/router.js\";\nimport { useAuth } from \"./../util/auth.js\";\nimport \"./DashboardSection.scss\";\n\n\nfunction DashboardSection(props) {\n  const auth = useAuth();\n  const router = useRouter();\n  const [formAlert, setFormAlert] = useState(null);\n\n  // State to control whether we show a re-authentication flow\n  // Required by some security sensitive actions, such as changing password.\n  const [reauthState, setReauthState] = useState({\n    show: false,\n  });\n\n  const validSections = {\n    \"home\": true,\n    \"send-a-text\": true,\n    \"deliveries\": true\n  };\n\n  const section = validSections[props.section] ? props.section : \"home\";\n\n  // Handle status of type \"success\", \"error\", or \"requires-recent-login\"\n  // We don't treat \"requires-recent-login\" as an error as we handle it\n  // gracefully by taking the user through a re-authentication flow.\n  const handleStatus = ({ type, message, callback }) => {\n    if (type === \"requires-recent-login\") {\n      // First clear any existing message\n      setFormAlert(null);\n      // Then update state to show re-authentication modal\n      setReauthState({\n        show: true,\n        // Failed action to try again after reauth\n        callback: callback,\n      });\n    } else {\n      // Display message to user (type is success or error)\n      setFormAlert({\n        type: type,\n        message: message,\n      });\n    }\n  };\n\n  return (\n    <Section color={props.color} size={props.size}>\n      <div className=\"container\">\n        <SectionHeader\n          title={props.title}\n          subtitle={props.subtitle}\n          size={3}\n          spaced={true}\n          className=\"has-text-centered\"\n        />\n\n        {router.query.paid && auth.user.planIsActive && (\n          <article className=\"DashboardSection__paid-message message is-success mx-auto\">\n            <div className=\"message-body\">\n              You are now subscribed\n              <span className=\"ml-2\" role=\"img\" aria-label=\"party\">\n                🥳\n              </span>\n            </div>\n          </article>\n        )}\n\n        <div className=\"columns is-vcentered is-desktop mt-5\">\n          <div className=\"column is-6-desktop\">\n            <div className=\"content\">\n            <Section\n      color={props.color}\n      size={props.size}\n      backgroundImage={props.backgroundImage}\n      backgroundImageOpacity={props.backgroundImageOpacity}\n    >\n      {reauthState.show && (\n        <ReauthModal\n          callback={reauthState.callback}\n          provider={auth.user.providers[0]}\n          onDone={() => setReauthState({ show: false })}\n        />\n      )}\n\n      <DashboardNav activeKey={section} parentColor={props.color} />\n      <div className=\"DashboardSection__container container\">\n        {formAlert && (\n          <FormAlert\n            type={formAlert.type}\n            message={formAlert.message}\n            style={{ maxWidth: \"450px\" }}\n          />\n        )}\n\n        {section === \"home\" && (\n          <DashboardHome parentColor={props.color} onStatus={handleStatus} />\n        )}\n\n        {section === \"send-a-text\" && (\n          <DashboardSms parentColor={props.color} onStatus={handleStatus} />\n        )}\n\n        {section === \"deliveries\" && (\n          <DashboardDeliveries parentColor={props.color} onStatus={handleStatus} />\n        )}\n\n      </div>\n    </Section>\n            </div>\n          </div>\n          <div className=\"column is-1\" />\n          <div className=\"column\">\n            <figure className=\"DashboardSection__image image\">\n              <img\n                src=\"https://uploads.divjoy.com/undraw-personal_settings_kihd.svg\"\n                alt=\"Illustration\"\n              />\n            </figure>\n          </div>\n        </div>\n        <div\n          className=\"mx-auto has-text-centered mt-5\"\n          style={{\n            maxWidth: \"460px\",\n          }}\n        >\n          <nav className=\"panel mt-3\">\n            <div className=\"panel-block is-block\">\n              Logged in as&nbsp;<strong>{auth.user.email}</strong>\n            </div>\n            <div className=\"panel-block is-block\">\n              {auth.user.stripeSubscriptionId && (\n                <>\n                  Subscription data\n                  <br />\n                  ID: <strong>{auth.user.stripeSubscriptionId}</strong>\n                  <br />\n                  Price ID: <strong>{auth.user.stripePriceId}</strong>\n                  <br />\n                  Status: <strong>{auth.user.stripeSubscriptionStatus}</strong>\n                </>\n              )}\n\n              {!auth.user.stripeSubscriptionId && (\n                <Link to=\"/pricing\">Subscribe to a plan</Link>\n              )}\n            </div>\n            <div className=\"panel-block is-block\">\n              <Link to=\"/settings/general\">Account settings</Link>\n            </div>\n          </nav>\n        </div>\n      </div>\n    </Section>\n  );\n}\n\nexport default DashboardSection;\n"]},"metadata":{},"sourceType":"module"}