{"ast":null,"code":"var _jsxFileName = \"/Users/rhendren/walleye_sms/src/components/ReauthModal.js\";\nimport React, { useState } from \"react\";\nimport FormAlert from \"./FormAlert\";\nimport FormField from \"./FormField\";\nimport SectionButton from \"./SectionButton\";\nimport AuthSocial from \"./AuthSocial\";\nimport { useAuth } from \"./../util/auth.js\";\nimport { useForm } from \"react-hook-form\";\n\nfunction ReauthModal(props) {\n  const auth = useAuth();\n  const [pending, setPending] = useState(false);\n  const [formAlert, setFormAlert] = useState(null);\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n\n  const onSubmit = data => {\n    const {\n      pass\n    } = data;\n    setPending(true);\n    auth.signin(auth.user.email, pass).then(() => {\n      // Call failed action that originally required reauth\n      props.callback(); // Let parent know we're done so they can hide modal\n\n      props.onDone();\n    }).catch(error => {\n      // Hide pending indicator\n      setPending(false); // Show error alert message\n\n      setFormAlert({\n        type: \"error\",\n        message: error.message\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal is-active\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-background\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-header-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }, \"Please sign in again to complete this action\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"card-header-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"delete\",\n    ariaLabel: \"close\",\n    onClick: e => props.onCancel(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"card-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, formAlert && /*#__PURE__*/React.createElement(FormAlert, {\n    type: formAlert.type,\n    message: formAlert.message,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }), props.provider === \"password\" && /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormField, {\n    name: \"pass\",\n    type: \"password\",\n    placeholder: \"Password\",\n    error: errors.pass,\n    inputRef: register({\n      required: \"Please enter your password\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(SectionButton, {\n    parentColor: props.parentColor,\n    size: \"medium\",\n    state: pending ? \"loading\" : \"normal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 19\n    }\n  }, \"Sign in\")))), props.provider !== \"password\" && /*#__PURE__*/React.createElement(AuthSocial, {\n    type: \"signin\",\n    buttonText: \"Sign in\",\n    showLastUsed: false,\n    providers: [props.provider],\n    onAuth: () => {\n      props.callback();\n      props.onDone();\n    },\n    onError: message => {\n      setFormAlert({\n        type: \"error\",\n        message: message\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }))));\n}\n\nexport default ReauthModal;","map":{"version":3,"sources":["/Users/rhendren/walleye_sms/src/components/ReauthModal.js"],"names":["React","useState","FormAlert","FormField","SectionButton","AuthSocial","useAuth","useForm","ReauthModal","props","auth","pending","setPending","formAlert","setFormAlert","register","handleSubmit","errors","onSubmit","data","pass","signin","user","email","then","callback","onDone","catch","error","type","message","e","onCancel","provider","required","parentColor"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport FormAlert from \"./FormAlert\";\nimport FormField from \"./FormField\";\nimport SectionButton from \"./SectionButton\";\nimport AuthSocial from \"./AuthSocial\";\nimport { useAuth } from \"./../util/auth.js\";\nimport { useForm } from \"react-hook-form\";\n\nfunction ReauthModal(props) {\n  const auth = useAuth();\n  const [pending, setPending] = useState(false);\n  const [formAlert, setFormAlert] = useState(null);\n\n  const { register, handleSubmit, errors } = useForm();\n\n  const onSubmit = (data) => {\n    const { pass } = data;\n    setPending(true);\n\n    auth\n      .signin(auth.user.email, pass)\n      .then(() => {\n        // Call failed action that originally required reauth\n        props.callback();\n        // Let parent know we're done so they can hide modal\n        props.onDone();\n      })\n      .catch((error) => {\n        // Hide pending indicator\n        setPending(false);\n        // Show error alert message\n        setFormAlert({\n          type: \"error\",\n          message: error.message,\n        });\n      });\n  };\n\n  return (\n    <div className=\"modal is-active\">\n      <div className=\"modal-background\" />\n      <div className=\"card\">\n        <header className=\"card-header\">\n          <p className=\"card-header-title\">\n            Please sign in again to complete this action\n          </p>\n          <span className=\"card-header-icon\">\n            <a\n              className=\"delete\"\n              ariaLabel=\"close\"\n              onClick={(e) => props.onCancel()}\n            />\n          </span>\n        </header>\n        <section className=\"card-content\">\n          {formAlert && (\n            <FormAlert type={formAlert.type} message={formAlert.message} />\n          )}\n\n          {props.provider === \"password\" && (\n            <form onSubmit={handleSubmit(onSubmit)}>\n              <FormField\n                name=\"pass\"\n                type=\"password\"\n                placeholder=\"Password\"\n                error={errors.pass}\n                inputRef={register({\n                  required: \"Please enter your password\",\n                })}\n              />\n              <div className=\"field\">\n                <div className=\"control\">\n                  <SectionButton\n                    parentColor={props.parentColor}\n                    size=\"medium\"\n                    state={pending ? \"loading\" : \"normal\"}\n                  >\n                    Sign in\n                  </SectionButton>\n                </div>\n              </div>\n            </form>\n          )}\n\n          {props.provider !== \"password\" && (\n            <AuthSocial\n              type=\"signin\"\n              buttonText=\"Sign in\"\n              showLastUsed={false}\n              providers={[props.provider]}\n              onAuth={() => {\n                props.callback();\n                props.onDone();\n              }}\n              onError={(message) => {\n                setFormAlert({\n                  type: \"error\",\n                  message: message,\n                });\n              }}\n            />\n          )}\n        </section>\n      </div>\n    </div>\n  );\n}\n\nexport default ReauthModal;\n"]},"metadata":{},"sourceType":"module"}