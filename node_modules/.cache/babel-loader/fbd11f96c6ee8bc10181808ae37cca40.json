{"ast":null,"code":"import { apiRequest } from \"./util\";\nexport async function sendSms(number, message) {\n  // Create a twilio session\n  console.log(number);\n  return await apiRequest(\"twilio-send-sms\", \"POST\", {\n    to: String(number),\n    // Need someway to enforce number format\n    message: message\n  });\n}\nexport async function batchSms(numbers, message) {\n  let requests = []; // Text request\n\n  const requestSms = numbers.forEach(async num => {\n    await sendSms(num, message).then(status => {\n      messages.push({\n        to: status.to,\n        from: status.from,\n        body: status.body,\n        dateSent: status.dateSent,\n        errorMessage: status.errorMessage,\n        price: status.price\n      });\n      console.log(status);\n    }).catch(error => {\n      alert(error.message);\n    });\n  });\n  Promise.all(requests).then(() => {\n    console.log('messages');\n    console.log(messages);\n  });\n}","map":{"version":3,"sources":["/Users/rhendren/walleye_sms/src/util/twilio.js"],"names":["apiRequest","sendSms","number","message","console","log","to","String","batchSms","numbers","requests","requestSms","forEach","num","then","status","messages","push","from","body","dateSent","errorMessage","price","catch","error","alert","Promise","all"],"mappings":"AAAA,SAASA,UAAT,QAA2B,QAA3B;AAEA,OAAO,eAAeC,OAAf,CAAuBC,MAAvB,EAA+BC,OAA/B,EAAwC;AAC3C;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACA,SAAO,MAAMF,UAAU,CAAC,iBAAD,EAAoB,MAApB,EAA4B;AAC/CM,IAAAA,EAAE,EAAEC,MAAM,CAACL,MAAD,CADqC;AAC1B;AACrBC,IAAAA,OAAO,EAAEA;AAFsC,GAA5B,CAAvB;AAIH;AAED,OAAO,eAAeK,QAAf,CAAwBC,OAAxB,EAAiCN,OAAjC,EAA0C;AAC7C,MAAIO,QAAQ,GAAG,EAAf,CAD6C,CAG7C;;AACA,QAAMC,UAAU,GAAGF,OAAO,CAACG,OAAR,CAAgB,MAAOC,GAAP,IAAe;AAC9C,UAAMZ,OAAO,CAACY,GAAD,EAAMV,OAAN,CAAP,CACLW,IADK,CACCC,MAAD,IAAY;AACdC,MAAAA,QAAQ,CAACC,IAAT,CAAc;AACVX,QAAAA,EAAE,EAAES,MAAM,CAACT,EADD;AAEVY,QAAAA,IAAI,EAAEH,MAAM,CAACG,IAFH;AAGVC,QAAAA,IAAI,EAAEJ,MAAM,CAACI,IAHH;AAIVC,QAAAA,QAAQ,EAAEL,MAAM,CAACK,QAJP;AAKVC,QAAAA,YAAY,EAAEN,MAAM,CAACM,YALX;AAMVC,QAAAA,KAAK,EAAEP,MAAM,CAACO;AANJ,OAAd;AAQAlB,MAAAA,OAAO,CAACC,GAAR,CAAYU,MAAZ;AACH,KAXK,EAYLQ,KAZK,CAYEC,KAAD,IAAW;AACdC,MAAAA,KAAK,CAACD,KAAK,CAACrB,OAAP,CAAL;AACH,KAdK,CAAN;AAeH,GAhBkB,CAAnB;AAiBAuB,EAAAA,OAAO,CAACC,GAAR,CAAYjB,QAAZ,EAAsBI,IAAtB,CAA2B,MAAM;AAC7BV,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYW,QAAZ;AACH,GAHD;AAIH","sourcesContent":["import { apiRequest } from \"./util\";\n\nexport async function sendSms(number, message) {\n    // Create a twilio session\n    console.log(number);\n    return await apiRequest(\"twilio-send-sms\", \"POST\", {\n        to: String(number),  // Need someway to enforce number format\n        message: message\n    });\n}\n\nexport async function batchSms(numbers, message) {\n    let requests = [];\n\n    // Text request\n    const requestSms = numbers.forEach(async (num) => {\n        await sendSms(num, message)\n        .then((status) => {\n            messages.push({\n                to: status.to,\n                from: status.from,\n                body: status.body,\n                dateSent: status.dateSent,\n                errorMessage: status.errorMessage,\n                price: status.price\n            });\n            console.log(status);\n        })\n        .catch((error) => {\n            alert(error.message);\n        });\n    });\n    Promise.all(requests).then(() => {\n        console.log('messages');\n        console.log(messages);\n    });\n}"]},"metadata":{},"sourceType":"module"}