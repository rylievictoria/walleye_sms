{"ast":null,"code":"import _slicedToArray from\"/Users/rhendren/walleye_sms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useAuth}from\"./../util/auth.js\";import\"./AuthSocial.scss\";function AuthSocial(props){var auth=useAuth();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),pending=_useState2[0],setPending=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),lastUsed=_useState4[0],setLastUsed=_useState4[1];var providerDisplayNames={google:\"Google\",facebook:\"Facebook\",twitter:\"Twitter\",github:\"GitHub\"};var onSigninWithProvider=function onSigninWithProvider(provider){setPending(provider);auth.signinWithProvider(provider).then(function(user){// Remember this provider was last used\n// so we can indicate for next login.\nlocalStorage.setItem(\"lastUsedAuthProvider\",provider);props.onAuth(user);}).catch(function(error){props.onError(error.message);}).finally(function(){setPending(null);});};// Get value of last used auth provider\nuseEffect(function(){if(props.showLastUsed){var _lastUsed=localStorage.getItem(\"lastUsedAuthProvider\");if(_lastUsed){setLastUsed(_lastUsed);}}},[props.showLastUsed]);return/*#__PURE__*/React.createElement(\"div\",{className:\"buttons\"},props.providers.map(function(provider){return/*#__PURE__*/React.createElement(\"button\",{className:\"button is-medium is-fullwidth\"+(pending===provider?\" is-loading\":\"\"),onClick:function onClick(){onSigninWithProvider(provider);},key:provider},/*#__PURE__*/React.createElement(\"div\",{className:\"AuthSocial__icon icon\"},/*#__PURE__*/React.createElement(\"img\",{src:\"https://uploads.divjoy.com/icon-\".concat(provider,\".svg\"),alt:providerDisplayNames[provider]})),/*#__PURE__*/React.createElement(\"span\",null,props.buttonText,\" with \",providerDisplayNames[provider]),provider===lastUsed&&/*#__PURE__*/React.createElement(\"span\",{className:\"AuthSocial__tag tag is-warning\"},\"Last used\"));}));}export default AuthSocial;","map":{"version":3,"sources":["/Users/rhendren/walleye_sms/src/components/AuthSocial.js"],"names":["React","useEffect","useState","useAuth","AuthSocial","props","auth","pending","setPending","lastUsed","setLastUsed","providerDisplayNames","google","facebook","twitter","github","onSigninWithProvider","provider","signinWithProvider","then","user","localStorage","setItem","onAuth","catch","error","onError","message","finally","showLastUsed","getItem","providers","map","buttonText"],"mappings":"kJAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,OAAT,KAAwB,mBAAxB,CACA,MAAO,mBAAP,CAEA,QAASC,CAAAA,UAAT,CAAoBC,KAApB,CAA2B,CACzB,GAAMC,CAAAA,IAAI,CAAGH,OAAO,EAApB,CADyB,cAEKD,QAAQ,CAAC,IAAD,CAFb,wCAElBK,OAFkB,eAETC,UAFS,8BAGON,QAAQ,CAAC,IAAD,CAHf,yCAGlBO,QAHkB,eAGRC,WAHQ,eAKzB,GAAMC,CAAAA,oBAAoB,CAAG,CAC3BC,MAAM,CAAE,QADmB,CAE3BC,QAAQ,CAAE,UAFiB,CAG3BC,OAAO,CAAE,SAHkB,CAI3BC,MAAM,CAAE,QAJmB,CAA7B,CAOA,GAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACC,QAAD,CAAc,CACzCT,UAAU,CAACS,QAAD,CAAV,CACAX,IAAI,CACDY,kBADH,CACsBD,QADtB,EAEGE,IAFH,CAEQ,SAACC,IAAD,CAAU,CACd;AACA;AACAC,YAAY,CAACC,OAAb,CAAqB,sBAArB,CAA6CL,QAA7C,EACAZ,KAAK,CAACkB,MAAN,CAAaH,IAAb,EACD,CAPH,EAQGI,KARH,CAQS,SAACC,KAAD,CAAW,CAChBpB,KAAK,CAACqB,OAAN,CAAcD,KAAK,CAACE,OAApB,EACD,CAVH,EAWGC,OAXH,CAWW,UAAM,CACbpB,UAAU,CAAC,IAAD,CAAV,CACD,CAbH,EAcD,CAhBD,CAkBA;AACAP,SAAS,CAAC,UAAM,CACd,GAAII,KAAK,CAACwB,YAAV,CAAwB,CACtB,GAAMpB,CAAAA,SAAQ,CAAGY,YAAY,CAACS,OAAb,CAAqB,sBAArB,CAAjB,CACA,GAAIrB,SAAJ,CAAc,CACZC,WAAW,CAACD,SAAD,CAAX,CACD,CACF,CACF,CAPQ,CAON,CAACJ,KAAK,CAACwB,YAAP,CAPM,CAAT,CASA,mBACE,2BAAK,SAAS,CAAC,SAAf,EACGxB,KAAK,CAAC0B,SAAN,CAAgBC,GAAhB,CAAoB,SAACf,QAAD,qBACnB,8BACE,SAAS,CACP,iCACCV,OAAO,GAAKU,QAAZ,CAAuB,aAAvB,CAAuC,EADxC,CAFJ,CAKE,OAAO,CAAE,kBAAM,CACbD,oBAAoB,CAACC,QAAD,CAApB,CACD,CAPH,CAQE,GAAG,CAAEA,QARP,eAUE,2BAAK,SAAS,CAAC,uBAAf,eACE,2BACE,GAAG,2CAAqCA,QAArC,QADL,CAEE,GAAG,CAAEN,oBAAoB,CAACM,QAAD,CAF3B,EADF,CAVF,cAgBE,gCACGZ,KAAK,CAAC4B,UADT,UAC2BtB,oBAAoB,CAACM,QAAD,CAD/C,CAhBF,CAoBGA,QAAQ,GAAKR,QAAb,eACC,4BAAM,SAAS,CAAC,gCAAhB,cArBJ,CADmB,EAApB,CADH,CADF,CA8BD,CAED,cAAeL,CAAAA,UAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useAuth } from \"./../util/auth.js\";\nimport \"./AuthSocial.scss\";\n\nfunction AuthSocial(props) {\n  const auth = useAuth();\n  const [pending, setPending] = useState(null);\n  const [lastUsed, setLastUsed] = useState(null);\n\n  const providerDisplayNames = {\n    google: \"Google\",\n    facebook: \"Facebook\",\n    twitter: \"Twitter\",\n    github: \"GitHub\",\n  };\n\n  const onSigninWithProvider = (provider) => {\n    setPending(provider);\n    auth\n      .signinWithProvider(provider)\n      .then((user) => {\n        // Remember this provider was last used\n        // so we can indicate for next login.\n        localStorage.setItem(\"lastUsedAuthProvider\", provider);\n        props.onAuth(user);\n      })\n      .catch((error) => {\n        props.onError(error.message);\n      })\n      .finally(() => {\n        setPending(null);\n      });\n  };\n\n  // Get value of last used auth provider\n  useEffect(() => {\n    if (props.showLastUsed) {\n      const lastUsed = localStorage.getItem(\"lastUsedAuthProvider\");\n      if (lastUsed) {\n        setLastUsed(lastUsed);\n      }\n    }\n  }, [props.showLastUsed]);\n\n  return (\n    <div className=\"buttons\">\n      {props.providers.map((provider) => (\n        <button\n          className={\n            \"button is-medium is-fullwidth\" +\n            (pending === provider ? \" is-loading\" : \"\")\n          }\n          onClick={() => {\n            onSigninWithProvider(provider);\n          }}\n          key={provider}\n        >\n          <div className=\"AuthSocial__icon icon\">\n            <img\n              src={`https://uploads.divjoy.com/icon-${provider}.svg`}\n              alt={providerDisplayNames[provider]}\n            />\n          </div>\n          <span>\n            {props.buttonText} with {providerDisplayNames[provider]}\n          </span>\n\n          {provider === lastUsed && (\n            <span className=\"AuthSocial__tag tag is-warning\">Last used</span>\n          )}\n        </button>\n      ))}\n    </div>\n  );\n}\n\nexport default AuthSocial;\n"]},"metadata":{},"sourceType":"module"}