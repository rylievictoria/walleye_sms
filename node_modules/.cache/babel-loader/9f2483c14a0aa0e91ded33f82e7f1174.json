{"ast":null,"code":"import _slicedToArray from\"/Users/rhendren/walleye_sms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import FormAlert from\"./FormAlert\";import FormField from\"./FormField\";import SectionButton from\"./SectionButton\";import AuthSocial from\"./AuthSocial\";import{useAuth}from\"./../util/auth.js\";import{useForm}from\"react-hook-form\";function ReauthModal(props){var auth=useAuth();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),pending=_useState2[0],setPending=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),formAlert=_useState4[0],setFormAlert=_useState4[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var onSubmit=function onSubmit(data){var pass=data.pass;setPending(true);auth.signin(auth.user.email,pass).then(function(){// Call failed action that originally required reauth\nprops.callback();// Let parent know we're done so they can hide modal\nprops.onDone();}).catch(function(error){// Hide pending indicator\nsetPending(false);// Show error alert message\nsetFormAlert({type:\"error\",message:error.message});});};return/*#__PURE__*/React.createElement(\"div\",{className:\"modal is-active\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-background\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"header\",{className:\"card-header\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card-header-title\"},\"Please sign in again to complete this action\"),/*#__PURE__*/React.createElement(\"span\",{className:\"card-header-icon\"},/*#__PURE__*/React.createElement(\"a\",{className:\"delete\",ariaLabel:\"close\",onClick:function onClick(e){return props.onCancel();}}))),/*#__PURE__*/React.createElement(\"section\",{className:\"card-content\"},formAlert&&/*#__PURE__*/React.createElement(FormAlert,{type:formAlert.type,message:formAlert.message}),props.provider===\"password\"&&/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(FormField,{name:\"pass\",type:\"password\",placeholder:\"Password\",error:errors.pass,inputRef:register({required:\"Please enter your password\"})}),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"div\",{className:\"control\"},/*#__PURE__*/React.createElement(SectionButton,{parentColor:props.parentColor,size:\"medium\",state:pending?\"loading\":\"normal\"},\"Sign in\")))),props.provider!==\"password\"&&/*#__PURE__*/React.createElement(AuthSocial,{type:\"signin\",buttonText:\"Sign in\",showLastUsed:false,providers:[props.provider],onAuth:function onAuth(){props.callback();props.onDone();},onError:function onError(message){setFormAlert({type:\"error\",message:message});}}))));}export default ReauthModal;","map":{"version":3,"sources":["/Users/rhendren/walleye_sms/src/components/ReauthModal.js"],"names":["React","useState","FormAlert","FormField","SectionButton","AuthSocial","useAuth","useForm","ReauthModal","props","auth","pending","setPending","formAlert","setFormAlert","register","handleSubmit","errors","onSubmit","data","pass","signin","user","email","then","callback","onDone","catch","error","type","message","e","onCancel","provider","required","parentColor"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport FormAlert from \"./FormAlert\";\nimport FormField from \"./FormField\";\nimport SectionButton from \"./SectionButton\";\nimport AuthSocial from \"./AuthSocial\";\nimport { useAuth } from \"./../util/auth.js\";\nimport { useForm } from \"react-hook-form\";\n\nfunction ReauthModal(props) {\n  const auth = useAuth();\n  const [pending, setPending] = useState(false);\n  const [formAlert, setFormAlert] = useState(null);\n\n  const { register, handleSubmit, errors } = useForm();\n\n  const onSubmit = (data) => {\n    const { pass } = data;\n    setPending(true);\n\n    auth\n      .signin(auth.user.email, pass)\n      .then(() => {\n        // Call failed action that originally required reauth\n        props.callback();\n        // Let parent know we're done so they can hide modal\n        props.onDone();\n      })\n      .catch((error) => {\n        // Hide pending indicator\n        setPending(false);\n        // Show error alert message\n        setFormAlert({\n          type: \"error\",\n          message: error.message,\n        });\n      });\n  };\n\n  return (\n    <div className=\"modal is-active\">\n      <div className=\"modal-background\" />\n      <div className=\"card\">\n        <header className=\"card-header\">\n          <p className=\"card-header-title\">\n            Please sign in again to complete this action\n          </p>\n          <span className=\"card-header-icon\">\n            <a\n              className=\"delete\"\n              ariaLabel=\"close\"\n              onClick={(e) => props.onCancel()}\n            />\n          </span>\n        </header>\n        <section className=\"card-content\">\n          {formAlert && (\n            <FormAlert type={formAlert.type} message={formAlert.message} />\n          )}\n\n          {props.provider === \"password\" && (\n            <form onSubmit={handleSubmit(onSubmit)}>\n              <FormField\n                name=\"pass\"\n                type=\"password\"\n                placeholder=\"Password\"\n                error={errors.pass}\n                inputRef={register({\n                  required: \"Please enter your password\",\n                })}\n              />\n              <div className=\"field\">\n                <div className=\"control\">\n                  <SectionButton\n                    parentColor={props.parentColor}\n                    size=\"medium\"\n                    state={pending ? \"loading\" : \"normal\"}\n                  >\n                    Sign in\n                  </SectionButton>\n                </div>\n              </div>\n            </form>\n          )}\n\n          {props.provider !== \"password\" && (\n            <AuthSocial\n              type=\"signin\"\n              buttonText=\"Sign in\"\n              showLastUsed={false}\n              providers={[props.provider]}\n              onAuth={() => {\n                props.callback();\n                props.onDone();\n              }}\n              onError={(message) => {\n                setFormAlert({\n                  type: \"error\",\n                  message: message,\n                });\n              }}\n            />\n          )}\n        </section>\n      </div>\n    </div>\n  );\n}\n\nexport default ReauthModal;\n"]},"metadata":{},"sourceType":"module"}